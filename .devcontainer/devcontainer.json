// format details: https://code.visualstudio.com/docs/remote/devcontainerjson-reference
{
    "name": "compro",
    "build": {
        "dockerfile": "Dockerfile",
        "args": {
            "VARIANT": "ubuntu-20.04"
        }
    },
    "runArgs": [
        "--cap-add=SYS_PTRACE",
        "--security-opt",
        "seccomp=unconfined"
    ],
    // Comment out this line to run as root instead.
    "remoteUser": "vscode",
    // Use this environment variable if you need to bind mount your local source code into a new container.
    "remoteEnv": {
        "LOCAL_WORKSPACE_FOLDER": "${localWorkspaceFolder}",
        "COMPOSE_FORCE_WINDOWS_HOST": "true"
    },
    "postCreateCommand": "bash .devcontainer/setup.sh",
    // Use 'forwardPorts' to make a list of ports inside the container available locally.
    // "forwardPorts": [  // for php etc.
    //     80
    // ],
    // Set *default* container specific settings.json values on container create.
    "settings": {
        // python
        "python.defaultInterpreterPath": "/usr/bin/python3",
        "python.pythonPath": "/usr/bin/python3",
        // rust
        "rust-analyzer.rustfmt.enableRangeFormatting": true,
        "[rust]": {
            "editor.defaultFormatter": "matklad.rust-analyzer"
        },
        // Explorer に非表示
        "files.exclude": {
            "{.git,bin,book_src,obj,target,.clang-format,Cargo.lock,ComPro.csproj,LICENSE,*.log}": true
        },
        "rust-analyzer.checkOnSave.extraArgs": [
            "--target-dir",
            "./target",
            "--",
            "-A",
            "clippy::needless_range_loop",
        ],
    },
    // Add the IDs of extensions you want installed when the container is created.
    "extensions": [
        // c++
        "ms-vscode.cpptools",
        // c#
        // "ms-dotnettools.csharp",
        // go
        "golang.go",
        // rust
        "matklad.rust-analyzer",
        "serayuzgur.crates",
        // python
        "ms-python.python",
        // toml
        "tamasfe.even-better-toml",
        // docker
        // "ms-azuretools.vscode-docker",
        // others
        "ybaumes.highlight-trailing-white-spaces",
        // "esbenp.prettier-vscode"
    ],
}
